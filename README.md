# ç¦»çº¿ç‰ˆé—®å·





## ğŸ’¡å‰è¨€

  æŸå¤©åœ¨ã€æ˜é‡‘ã€‘çœ‹åˆ°ä½ä»£ç ç›¸å…³æ–‡ç« ï¼Œç»“åˆè‡ªå·±å¼€å‘è¿‡é‚£ä¹ˆå¤šçš„é¡¹ç›®ï¼Œç³»ç»Ÿé›†æˆ â€œè¡¨å•â€ã€â€œé—®å·â€ã€â€è€ƒè¯•â€ è¿˜æ˜¯æŒºå¸¸è§çš„ï¼Œé‚£ä¹ˆæ‘†åœ¨é¢å‰çš„å°±ä¸‰ä¸ªé€‰æ‹©ï¼šè‡ªç ”ã€æ‰¾ä¸ªå¼€æºã€ä¹°ç°æˆæœåŠ¡ã€‚

- è‡ªç ”
  - âœ…ä¼˜ç‚¹ï¼šå®šåˆ¶å¼€å‘ï¼Œæ·±å…¥èå…¥ç³»ç»Ÿï¼Œå¯éšç€ç³»ç»Ÿè¿­ä»£ä¸æ–­å‡çº§
  - âŒç¼ºç‚¹ï¼šæ—¶é—´æˆæœ¬é«˜ã€äººåŠ›æˆæœ¬é«˜ã€åªèƒ½è·Ÿç€ä¸€ä¸ªé¡¹ç›®ï¼Œå¦å¤–é¡¹ç›®è¦ç”¨éœ€è¦å¤åˆ¶ä¸€ä»½ï¼Œé‡åˆ°bugï¼Œå¤åˆ¶äº†å¤šå°‘ä»½å°±å¾—æ”¹å¤šå°‘æ¬¡
- æ‰¾ä¸ªå¼€æº
  - âœ…ä¼˜ç‚¹ï¼šå¼€ç®±å³ç”¨ã€çœäº‹çœåŠ›
  - âŒç¼ºç‚¹ï¼šéœ€è¦é˜…è¯»ç†è§£æºç ã€å‰ç«¯æ¡†æ¶éœ€è¦ä¸é¡¹ç›®æ¡†æ¶ä¸€è‡´
- ä¹°ç°åœºæœåŠ¡
  - âœ…ä¼˜ç‚¹ï¼šé™¤äº†èŠ±é’±ï¼Œå…¨æ˜¯ä¼˜ç‚¹
  - âŒç¼ºç‚¹ï¼šè®¢é˜…èŠ±é’±ï¼Œé¡¹ç›®æˆæœ¬å¢åŠ 



  æ‰€ä»¥çªå‘å¥‡æƒ³ï¼Œèƒ½ä¸èƒ½å¼„ä¸€æ¬¾ã€ç¦»çº¿ç‰ˆé—®å·ã€‘ï¼Œé¡¹ç›®ç‹¬ç«‹éƒ¨ç½²ï¼Œåªå¤„ç† â€œç¼–è¾‘â€ å’Œ â€œæ¸²æŸ“â€ï¼Œä»»æ„é¡¹ç›®æƒ³è¦é›†æˆï¼Œé€šè¿‡ã€iframeã€‘åµŒå…¥ï¼Œåªå…³å¿ƒæ•°æ®ã€‚

- ç¦»çº¿ç‰ˆé—®å·
  - âœ…ä¼˜ç‚¹ï¼šé¡¹ç›®ç‹¬ç«‹éƒ¨ç½²ã€å•ç‹¬ç»´æŠ¤ã€å¤šé¡¹ç›®å¯ä»¥æ— è§†å‰ç«¯æ¡†æ¶è¿›è¡Œé›†æˆï¼Œåªå…³å¿ƒæ•°æ®
  - âŒç¼ºç‚¹ï¼šåªé€‚åˆè¦æ±‚ä¸é«˜çš„åœºæ™¯



## ğŸ¨ é¢„è§ˆ

![è®¾è®¡é¡µé¢](https://ice.frostsky.com/2024/09/07/9333849b177c02567493135777dcbb1c.png)



## ğŸŒˆ æŠ€æœ¯æ ˆ

```
vue3
```



## ğŸ“¦ ä»“åº“

[questionnaire_web](https://github.com/chenbz777/questionnaire_web)



## ğŸ’» åˆå§‹åŒ–

```bash
pnpm install
```



## ğŸš€ å¯åŠ¨

```bash
pnpm dev
```



## ğŸ› ï¸ æ‰“åŒ…

```bash
pnpm build
```



## ğŸ—‚ ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ api
â”‚   â”œâ”€â”€ assets
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ hooks
â”‚   â”‚   â”œâ”€â”€ useAnimate  // åŠ¨ç”»
â”‚   â”‚   â”œâ”€â”€ useDesignV1  // é—®å·è®¾è®¡V1
â”‚   â”‚   â”‚   â”œâ”€â”€ action.js  // è§£æåŠ¨ä½œå‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ common  // å¸¸ç”¨å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ materielComponents  // æ§ä»¶æºç 
â”‚   â”‚   â”‚   â””â”€â”€ materielModel  // æ§ä»¶æ¨¡å‹
â”‚   â”‚   â””â”€â”€ useGlobal  // å…¨å±€
â”‚   â”œâ”€â”€ main.js
â”‚   â”œâ”€â”€ router  // è·¯ç”±
â”‚   â”œâ”€â”€ stores
â”‚   â”œâ”€â”€ styles  // å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ utils  // å·¥å…·é›†åˆ
â”‚   â””â”€â”€ views
â”‚       â”œâ”€â”€ 404.vue
â”‚       â”œâ”€â”€ home.vue
â”‚       â””â”€â”€ questionnaire
â”‚           â””â”€â”€ v1
â”‚               â”œâ”€â”€ answer  // å¡«ç­”é¡µé¢
â”‚               â”œâ”€â”€ demo.vue
â”‚               â”œâ”€â”€ design  // è®¾è®¡é¡µé¢
â”‚               â””â”€â”€ styles  // æ ·å¼
â””â”€â”€ vite.config.js
```





## âœ¨ ä½¿ç”¨æ–¹æ³•

### é›†æˆã€è®¾è®¡é—®å·ã€‘

```vue
<script setup>
// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const designUrl = 'https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/design';

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log('setQuestionnaireData', questionnaireData);
  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData);
}
  
// ç¬¬å››æ­¥: é…ç½®å®Œæˆåè·å–é—®å·æ•°æ®å­˜èµ·æ¥, è¿™é‡Œå®é™…ä¸Šåº”è¯¥æ˜¯ä¼ é€’ç»™æ¥å£è¿›è¡Œä¿å­˜
function getQuestionnaireData() {
  // getQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  questionnaireData = window.myIframe.contentWindow.getQuestionnaireData();
  console.log('getQuestionnaireData', questionnaireData);
}
</script>

<template>
  <div>
    <iframe :src="designUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```



### é›†æˆã€å¡«å†™é—®å·ã€‘

```vue
<script setup>
import { onMounted, nextTick } from 'vue';

// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const answerUrl = 'https://chenbz777.github.io/questionnaire_web/questionnaire/v1/answer';

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log('setQuestionnaireData', questionnaireData);
  
  // data æ˜¯é—®å·å¡«ç­”æ•°æ®,æŠŠonSubmitè·å–åˆ°çš„ submitData.data åŸæ ·ä¼ å›å»å°±å¯ä»¥è¿›è¡Œæ•°æ®å›æ˜¾
  const data = {};
  
  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData, data);
}

nextTick(() => {
  // ç¬¬å››æ­¥: æŒ‚è½½æäº¤æ–¹æ³•è¿›è¡Œå›è°ƒ
  window.myIframe2.contentWindow.onSubmit = function (submitData) {
    /**
     * submitData: {
     *  errorList: [],  // é”™è¯¯åˆ—è¡¨
     *  data: {},  // é—®å·æ•°æ®
     *  totalScore: 0,  // æ€»åˆ†
     *  score: 0,  // å¾—åˆ†
     *  questionAnswer: [],  // ç­”é¢˜æƒ…å†µ: é¢˜ç›®-å¾—åˆ†ã€ä¸å¾—åˆ†ã€æœªç­”
     *  answerTimer: 0,  // ç­”é¢˜æ—¶é•¿
     */
    console.log('onSubmit', submitData);
  };
});

onMounted(() => {
  // è®¾ç½®é—®å·æ•°æ®: å®é™…ä¸Šåº”è¯¥æ˜¯è¯·æ±‚æ•°æ®è·å–åå†è°ƒç”¨
  setQuestionnaireData();
});
</script>

<template>
  <div>
    <iframe :src="answerUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```



### é›†æˆã€åªè¯»é—®å·ã€‘

```vue
<script setup>
import { onMounted } from 'vue';

// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const readonlyUrl = 'https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/readonly';

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log('setQuestionnaireData', questionnaireData);
  
  // data æ˜¯é—®å·å¡«ç­”æ•°æ®,æŠŠonSubmitè·å–åˆ°çš„ submitData.data åŸæ ·ä¼ å›å»å°±å¯ä»¥è¿›è¡Œæ•°æ®å›æ˜¾
  const data = {};
  
  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData, data);
}
  
onMounted(() => {
  // è®¾ç½®é—®å·æ•°æ®: å®é™…ä¸Šåº”è¯¥æ˜¯è¯·æ±‚æ•°æ®è·å–åå†è°ƒç”¨
  setQuestionnaireData();
});
</script>

<template>
  <div>
    <iframe :src="readonlyUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```



### é›†æˆã€å¡«ç­”ç®€æ´ç‰ˆé—®å·ã€‘

```js
const answerEasyUrl = 'https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/answer/easy';
```

> ç”¨æ³•ä¸ã€å¡«ç­”é—®å·ã€‘ä¸€è‡´ï¼Œåªæ˜¯å»æ‰äº†"çš®è‚¤"æ ·å¼



### é›†æˆã€åªè¯»ç®€æ´ç‰ˆé—®å·ã€‘

```js
const readonlyEasyUrl = 'https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/readonly/easy';
```

> ç”¨æ³•ä¸ã€åªè¯»é—®å·ã€‘ä¸€è‡´ï¼Œåªæ˜¯å»æ‰äº†"çš®è‚¤"æ ·å¼



## ğŸ—ï¸ å¾…å®Œå–„

1. [æ§ä»¶] é™„ä»¶ä¸Šä¼ 

   > å› ä¸ºæ²¡æœ‰å­˜å‚¨åº“ï¼Œæ‰€ä»¥æ²¡æœ‰æ¥ä¸Šä¼ åŠŸèƒ½

2. [æ§ä»¶] æ—¥æœŸæ—¶é—´

   > æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°å¥½çš„æ—¥æœŸæ—¶é—´æ’ä»¶ï¼Œåç»­å†è¡¥å……



## ğŸ“Œ è®¸å¯åè®®

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºï¼Œè¯¦æƒ…è¯·å‚é˜… [LICENSE](./LICENSE) æ–‡ä»¶ã€‚



## ğŸ¨ å±•ç¤º

é¢˜å‹

![é¢˜å‹](https://ice.frostsky.com/2024/09/07/76cbe06bece057e35164d96bcb42a153.png)

å¤§çº²

![å¤§çº²](https://ice.frostsky.com/2024/09/07/41c077dd8be1669ea701299e8e95647a.png)

é€»è¾‘

![é€»è¾‘](https://ice.frostsky.com/2024/09/07/1f0282d137bbc11da12edb5c6fb00221.png)

äº‹ä»¶

![äº‹ä»¶](https://ice.frostsky.com/2024/09/07/599d02223ff0ded5bb744d4464229e8c.png)

æ£€æŸ¥

![æ£€æŸ¥](https://ice.frostsky.com/2024/09/07/3c35bacbb4dd9bb5a1ee767967772a5c.png)

é¢˜åº“

![é¢˜åº“](https://ice.frostsky.com/2024/09/07/5c8536d3b58a3de3907df477da857833.png)

çš®è‚¤

![çš®è‚¤](https://ice.frostsky.com/2024/09/07/e01f7c3c24ae62ed63e7dbbce33e8a3c.png)

é¢„è§ˆ

![é¢„è§ˆ](https://ice.frostsky.com/2024/09/07/e37e78575c73ec34f34c1cde35dbc27b.png)
