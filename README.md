# ç¦»çº¿ç‰ˆé—®å·

## ğŸ’¡ å‰è¨€

æŸå¤©åœ¨ã€æ˜é‡‘ã€‘çœ‹åˆ°ä½ä»£ç ç›¸å…³æ–‡ç« ï¼Œç»“åˆè‡ªå·±å¼€å‘è¿‡é‚£ä¹ˆå¤šçš„é¡¹ç›®ï¼Œç³»ç»Ÿé›†æˆ â€œè¡¨å•â€ã€â€œé—®å·â€ã€â€è€ƒè¯•â€ è¿˜æ˜¯æŒºå¸¸è§çš„ï¼ŒæŸ¥é˜…äº†å¥½å¤šå¼€æºé¡¹ç›®ï¼Œéƒ½æ˜¯ç‹¬ç«‹çš„ä¸€ä¸ªç³»ç»Ÿï¼Œå¾ˆéš¾é›†æˆåˆ°ç°æœ‰çš„é¡¹ç›®ä¸­ï¼Œäºæ˜¯æˆ‘åœ¨æƒ³ï¼šä¸ºä»€ä¹ˆä¸èƒ½æœ‰ä¸€æ¬¾ã€ç¦»çº¿ç‰ˆé—®å·ã€‘ï¼Œå®ƒæä¾› â€è®¾è®¡é—®å·é¡µé¢â€œ ï¼Œä¹Ÿæä¾› â€œæ¸²æŸ“é—®å·é¡µé¢â€ï¼Œå®ƒåªå…³å¿ƒæ•°æ®ï¼Œä¸å…³å¿ƒé›†æˆåˆ°å“ªä¸ªç³»ç»Ÿï¼Œä¸å…³å¿ƒé›†æˆåˆ°å“ªä¸ªåŠŸèƒ½ã€‚

#### äº®ç‚¹

1. æä¾› â€œè®¾è®¡é—®å·â€ é¡µé¢
2. æä¾› â€œå¡«å†™é—®å·â€ é¡µé¢
3. æä¾› â€œåªè¯»é—®å·â€ é¡µé¢
4. æä¾› â€œç®€æ´å¡«å†™é—®å·â€ é¡µé¢
5. æä¾› â€œç®€æ´åªè¯»é—®å·â€ é¡µé¢
6. æ•°æ®å®‰å…¨ï¼Œç‚¹å‡»ã€æäº¤ã€‘æŒ‰é’®åï¼Œæäº¤å›è°ƒå‡½æ•°ç”±â€œå®¿ä¸»ç³»ç»Ÿâ€æä¾›

#### åœºæ™¯

- æƒ³å¼€å‘ä¸€æ¬¾ã€é—®å·ç³»ç»Ÿã€‘ï¼Œä¸ç”¨ä» 0 å¼€å§‹å»æ„å»ºï¼šæ§ä»¶æ¨¡å‹ã€äº‹ä»¶äº¤äº’ã€é€»è¾‘è§£æã€é—®å·æ¸²æŸ“ï¼Œæ‹¿æ¥å³ç”¨ã€‚
- æƒ³å¼€å‘ä¸€æ¬¾ã€æ´»åŠ¨ç³»ç»Ÿã€‘ï¼Œæ¯ä¸ªæ´»åŠ¨éœ€è¦å¡«å†™çš„ â€œæŠ¥åä¿¡æ¯â€ ä¸ä¸€æ ·ï¼Œå¼•å…¥ã€ç¦»çº¿ç‰ˆé—®å·ã€‘ï¼Œå¯è¿›è¡ŒåŠ¨æ€é…ç½®å¡«å†™å­—æ®µã€‚

#### é¢˜å¤–è¯

é¡¹ç›®ç›®å‰å¤„äºå°å­©å­åˆšå‡ºç”Ÿé˜¶æ®µï¼Œä¼šæœ‰å¾ˆå¤šçš„éœ€è¦å¾…å®Œå–„çš„ç‚¹ï¼Œå„ä½å¤§ä½¬æœ‰æ„è§å’Œéœ€æ±‚å’Œé¡¹ç›®ä¸è¶³ç‚¹æ¬¢è¿æå‡ºæ¥ï¼Œæˆ‘è™šå¿ƒå­¦ä¹ è¯·æ•™ã€‚

ç”Ÿæ´»ä¸­æ˜¯å‘å¾®çš„æ‰“å·¥äººï¼Œç¤¾æäº”é¢—æ˜Ÿï¼Œå¤§å®¶å£ä¸‹ç•™æƒ…ï¼Œè¢«ä¸šåŠ¡æŠ˜ç£¨å·²ç»èº«å¿ƒç–²æƒ«äº†ã€‚

ç¥å¤§å®¶ï¼šè´¢æºå¹¿è¿›ï¼Œé‡‘ç‰æ»¡å ‚ï¼Œèº«ä½“å¥åº·ï¼Œç¬‘å£å¸¸å¼€ï¼Œå‰ç¥¥å¦‚æ„ä¹æ— è¾¹ï¼

<br />

## ğŸ¨ é¢„è§ˆ

[ç‚¹å‡»é“¾æ¥ç›´è¾¾é¢„è§ˆåœ°å€](http://questionnaire.à° à° .com/questionnaire/v1/design)

![è®¾è®¡é¡µé¢](https://ice.frostsky.com/2024/09/13/b7987b8e01f2b9ec622aaab65dbc39a8.png)

## ğŸŒˆ æŠ€æœ¯æ ˆ

```
vue3
```

## ğŸ“¦ ä»“åº“

[questionnaire_web](https://github.com/chenbz777/questionnaire_web)

## ğŸ’» åˆå§‹åŒ–

```bash
pnpm install
```

## ğŸš€ å¯åŠ¨

```bash
pnpm dev
```

## ğŸ› ï¸ æ‰“åŒ…

```bash
pnpm build
```

## ğŸ—‚ ç›®å½•ç»“æ„

```
.
â”œâ”€â”€ README.md
â”œâ”€â”€ index.html
â”œâ”€â”€ package.json
â”œâ”€â”€ public
â”œâ”€â”€ src
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ api
â”‚   â”œâ”€â”€ assets
â”‚   â”œâ”€â”€ components
â”‚   â”œâ”€â”€ hooks
â”‚   â”‚   â”œâ”€â”€ useAnimate  // åŠ¨ç”»
â”‚   â”‚   â”œâ”€â”€ useDesignV1  // é—®å·è®¾è®¡V1
â”‚   â”‚   â”‚   â”œâ”€â”€ action.js  // è§£æåŠ¨ä½œå‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ common  // å¸¸ç”¨å‡½æ•°
â”‚   â”‚   â”‚   â”œâ”€â”€ index.js
â”‚   â”‚   â”‚   â”œâ”€â”€ materielComponents  // æ§ä»¶æºç 
â”‚   â”‚   â”‚   â””â”€â”€ materielModel  // æ§ä»¶æ¨¡å‹
â”‚   â”‚   â””â”€â”€ useGlobal  // å…¨å±€
â”‚   â”œâ”€â”€ main.js
â”‚   â”œâ”€â”€ router  // è·¯ç”±
â”‚   â”œâ”€â”€ stores
â”‚   â”œâ”€â”€ styles  // å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ utils  // å·¥å…·é›†åˆ
â”‚   â””â”€â”€ views
â”‚       â”œâ”€â”€ 404.vue
â”‚       â”œâ”€â”€ home.vue
â”‚       â””â”€â”€ questionnaire
â”‚           â””â”€â”€ v1
â”‚               â”œâ”€â”€ answer  // å¡«ç­”é¡µé¢
â”‚               â”œâ”€â”€ demo.vue
â”‚               â”œâ”€â”€ design  // è®¾è®¡é¡µé¢
â”‚               â””â”€â”€ styles  // æ ·å¼
â””â”€â”€ vite.config.js
```

## âœ¨ ä½¿ç”¨æ–¹æ³•

### é›†æˆã€è®¾è®¡é—®å·ã€‘

```vue
<script setup>
// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const designUrl =
  "https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/design";

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log("setQuestionnaireData", questionnaireData);
  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData);
}

// ç¬¬å››æ­¥: é…ç½®å®Œæˆåè·å–é—®å·æ•°æ®å­˜èµ·æ¥, è¿™é‡Œå®é™…ä¸Šåº”è¯¥æ˜¯ä¼ é€’ç»™æ¥å£è¿›è¡Œä¿å­˜
function getQuestionnaireData() {
  // getQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  questionnaireData = window.myIframe.contentWindow.getQuestionnaireData();
  console.log("getQuestionnaireData", questionnaireData);
}
</script>

<template>
  <div>
    <iframe :src="designUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```

### é›†æˆã€å¡«å†™é—®å·ã€‘

```vue
<script setup>
import { onMounted, nextTick } from "vue";

// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const answerUrl =
  "https://chenbz777.github.io/questionnaire_web/questionnaire/v1/answer";

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log("setQuestionnaireData", questionnaireData);

  // data æ˜¯é—®å·å¡«ç­”æ•°æ®,æŠŠonSubmitè·å–åˆ°çš„ submitData.data åŸæ ·ä¼ å›å»å°±å¯ä»¥è¿›è¡Œæ•°æ®å›æ˜¾
  const data = {};

  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData, data);
}

nextTick(() => {
  // ç¬¬å››æ­¥: æŒ‚è½½æäº¤æ–¹æ³•è¿›è¡Œå›è°ƒ
  window.myIframe2.contentWindow.onSubmit = function (submitData) {
    /**
     * errorList: é¢˜ç›®æ ¡éªŒé”™è¯¯åˆ—è¡¨
     * data: æäº¤çš„æ•°æ®
     * // ä¸€èˆ¬æƒ…å†µä¸‹, æäº¤çš„æ•°æ®ä¸­ä¼šåŒ…å«å¼€å§‹ç­”é¢˜æ—¶é—´å’Œç»“æŸç­”é¢˜æ—¶é—´, ä»¥åŠå¼€æ”¾ç”¨æˆ·æ ‡è¯†(ä¸è¦ä¾èµ–)
     * data.startAnswerTime: å¼€å§‹ç­”é¢˜æ—¶é—´
     * data.endAnswerTime: ç»“æŸç­”é¢˜æ—¶é—´
     * data.openUserKey: å¼€æ”¾ç”¨æˆ·æ ‡è¯†
     */
    console.log("onSubmit", submitData);
  };
});

onMounted(() => {
  // è®¾ç½®é—®å·æ•°æ®: å®é™…ä¸Šåº”è¯¥æ˜¯è¯·æ±‚æ•°æ®è·å–åå†è°ƒç”¨
  setQuestionnaireData();
});
</script>

<template>
  <div>
    <iframe :src="answerUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```

### é›†æˆã€åªè¯»é—®å·ã€‘

```vue
<script setup>
import { onMounted } from "vue";

// ç¬¬ä¸€æ­¥: æ‹¼å‡‘åœ°å€, åç»­æ¢æˆéƒ¨ç½²åçš„åŸŸå
const readonlyUrl =
  "https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/readonly";

// ç¬¬äºŒæ­¥: é—®å·æ•°æ®, å®é™…ä¸Šåº”è¯¥æ˜¯é€šè¿‡æ¥å£è·å–
let questionnaireData = {};

// ç¬¬ä¸‰æ­¥: è®¾ç½®é—®å·æ•°æ®
function setQuestionnaireData() {
  console.log("setQuestionnaireData", questionnaireData);

  // data æ˜¯é—®å·å¡«ç­”æ•°æ®,æŠŠonSubmitè·å–åˆ°çš„ submitData.data åŸæ ·ä¼ å›å»å°±å¯ä»¥è¿›è¡Œæ•°æ®å›æ˜¾
  const data = {};

  // setQuestionnaireData æ–¹æ³•æ˜¯â€œç¦»çº¿ç‰ˆé—®å·â€æŒ‚è½½ä¸Šå»çš„
  window.myIframe.contentWindow.setQuestionnaireData(questionnaireData, data);
}

onMounted(() => {
  // è®¾ç½®é—®å·æ•°æ®: å®é™…ä¸Šåº”è¯¥æ˜¯è¯·æ±‚æ•°æ®è·å–åå†è°ƒç”¨
  setQuestionnaireData();
});
</script>

<template>
  <div>
    <iframe :src="readonlyUrl" id="myIframe" class="my-iframe"></iframe>
  </div>
</template>

<style scoped>
.my-iframe {
  display: block;
  width: 100%;
  height: 100vh;
  border: 0;
}
</style>
```

### é›†æˆã€å¡«ç­”ç®€æ´ç‰ˆé—®å·ã€‘

```js
const answerEasyUrl =
  "https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/answer/easy";
```

> ç”¨æ³•ä¸ã€å¡«ç­”é—®å·ã€‘ä¸€è‡´ï¼Œåªæ˜¯å»æ‰äº†"çš®è‚¤"æ ·å¼

### é›†æˆã€åªè¯»ç®€æ´ç‰ˆé—®å·ã€‘

```js
const readonlyEasyUrl =
  "https://chenbz777.github.io/questionnaire_web/#/questionnaire/v1/readonly/easy";
```

> ç”¨æ³•ä¸ã€åªè¯»é—®å·ã€‘ä¸€è‡´ï¼Œåªæ˜¯å»æ‰äº†"çš®è‚¤"æ ·å¼

## ğŸ—ï¸ å¾…å®Œå–„

1. [æ§ä»¶] æ—¥æœŸæ—¶é—´

   > æš‚æ—¶è¿˜æ²¡æ‰¾åˆ°å¥½çš„æ—¥æœŸæ—¶é—´æ’ä»¶ï¼Œåç»­å†è¡¥å……



## ğŸ“Œ è®¸å¯åè®®

æœ¬é¡¹ç›®åŸºäº MIT è®¸å¯è¯å¼€æºï¼Œè¯¦æƒ…è¯·å‚é˜… [LICENSE](./LICENSE) æ–‡ä»¶ã€‚



## ğŸ¨ å±•ç¤º

é¢˜å‹

![é¢˜å‹](https://ice.frostsky.com/2024/09/07/76cbe06bece057e35164d96bcb42a153.png)

å¤§çº²

![å¤§çº²](https://ice.frostsky.com/2024/09/07/41c077dd8be1669ea701299e8e95647a.png)

é€»è¾‘

![é€»è¾‘](https://ice.frostsky.com/2024/09/07/1f0282d137bbc11da12edb5c6fb00221.png)

äº‹ä»¶

![äº‹ä»¶](https://ice.frostsky.com/2024/09/07/599d02223ff0ded5bb744d4464229e8c.png)

æ£€æŸ¥

![æ£€æŸ¥](https://ice.frostsky.com/2024/09/07/3c35bacbb4dd9bb5a1ee767967772a5c.png)

é¢˜åº“

![é¢˜åº“](https://ice.frostsky.com/2024/09/07/5c8536d3b58a3de3907df477da857833.png)

çš®è‚¤

![çš®è‚¤](https://ice.frostsky.com/2024/09/07/e01f7c3c24ae62ed63e7dbbce33e8a3c.png)

é¢„è§ˆ

![é¢„è§ˆ](https://ice.frostsky.com/2024/09/07/e37e78575c73ec34f34c1cde35dbc27b.png)



## ğŸ†• æ›´æ–°

2024/9/12ï¼Œæ–°å¢ã€è€ƒè¯•ã€‘ã€ã€æ¨¡ç‰ˆåº“ã€‘åŠŸèƒ½

è€ƒè¯•

![è€ƒè¯•](https://ice.frostsky.com/2024/09/13/ce5450424fbe5599ad2b28f9832e7d75.png)

æ¨¡ç‰ˆåº“

![æ¨¡ç‰ˆåº“](https://ice.frostsky.com/2024/09/13/b20d0ce86fddd0b7c5d1017c89803a6a.png)

